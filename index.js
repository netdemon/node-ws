const _0x5ee710=_0x51d4;(function(_0x1be4ba,_0x617493){const _0x19b502=_0x51d4,_0x118686=_0x1be4ba();while(!![]){try{const _0x595db5=-parseInt(_0x19b502(0x1f1))/0x1*(-parseInt(_0x19b502(0x1fe))/0x2)+-parseInt(_0x19b502(0x1ab))/0x3*(-parseInt(_0x19b502(0x1cf))/0x4)+parseInt(_0x19b502(0x1e8))/0x5*(-parseInt(_0x19b502(0x1c3))/0x6)+parseInt(_0x19b502(0x1a3))/0x7*(-parseInt(_0x19b502(0x1cb))/0x8)+-parseInt(_0x19b502(0x1d8))/0x9*(-parseInt(_0x19b502(0x1ef))/0xa)+parseInt(_0x19b502(0x1c2))/0xb+parseInt(_0x19b502(0x20b))/0xc*(parseInt(_0x19b502(0x1b6))/0xd);if(_0x595db5===_0x617493)break;else _0x118686['push'](_0x118686['shift']());}catch(_0x448961){_0x118686['push'](_0x118686['shift']());}}}(_0x4d18,0x27116));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x5ee710(0x1ee)),net=require('net'),path=require(_0x5ee710(0x1ba)),crypto=require(_0x5ee710(0x204)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x5ee710(0x205)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process.env.UUID||'ca20e16b-eb9b-4409-b865-b02e5eeded3d',NEZHA_SERVER=process.env.NEZHA_SERVER||'',NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',DOMAIN=process.env.DOMAIN||'netdemon-test.hf.space',AUTO_ACCESS=process.env.AUTO_ACCESS||!![],WSPATH=process.env.WSPATH||UUID[_0x5ee710(0x1c6)](0x0,0x8),SUB_PATH=process.env.SUB_PATH||_0x5ee710(0x1f9),NAME=process.env.NAME||'',PORT=process.env.PORT||0x1eb4;function _0x4d18(){const _0x2b04ac=['readUInt8','2053','52UWRZsq','text/plain','443','end','path','country_code','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','get','url','concat','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','73766oKcGtI','12kiLwZT','readFile','utf8','slice','1.1.1.1','npm\x20download\x20successfully','index.html','stream','48fticrN','every','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://dns.google/resolve?name=','68AeYWyX','https://api.ip.sb/geoip','npm','base64','then','trim','Unknown','decode','https://amd64.ssss.nyc.mn/agent','193275GXUoEo','arm64','catch','false','text/html','npm\x20running\x20error:','finish','https://arm64.ssss.nyc.mn/agent','join','readUInt16BE','vless://','chmod\x20+x\x20npm','error:\x20',':443?encryption=none&security=tls&sni=','test','8443','639155mNwIbX','writeHead','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','aarch64','reduce','&path=%2F','axios','70XdZJrT','replace','248639qmkSKq','&type=A','includes','write','\x20with\x20all\x20DNS\x20servers','pipe','writeFileSync','connection','sub','substr','application/json','Failed\x20to\x20resolve\x20','sha224','2gkpVDa','arch','https://arm64.ssss.nyc.mn/v1','map','8.8.4.4','listen','crypto','child_process','log','trojan://','error','length','connect','251112RucsBY','Automatic\x20Access\x20Task\x20added\x20successfully','Server\x20is\x20running\x20on\x20port\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2087','split','isp','utf-8','close','206122pJTUjq','pop','config.yaml','true','toString','&fp=chrome&type=ws&host=','Answer','npm\x20is\x20already\x20running,\x20skip\x20running...','18174QDXbhu','type','data','application/dns-json','once','createServer','unlink','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Hello\x20world!'];_0x4d18=function(){return _0x2b04ac;};return _0x4d18();}let ISP='';function _0x51d4(_0x275bbd,_0x2f5009){_0x275bbd=_0x275bbd-0x19b;const _0x4d18a6=_0x4d18();let _0x51d4f2=_0x4d18a6[_0x275bbd];return _0x51d4f2;}const GetISP=async()=>{const _0x5b36b4=_0x5ee710;try{const _0x430dc7=await axios[_0x5b36b4(0x1be)](_0x5b36b4(0x1d0)),_0x2c67c7=_0x430dc7[_0x5b36b4(0x1ad)];ISP=(_0x2c67c7[_0x5b36b4(0x1bb)]+'-'+_0x2c67c7[_0x5b36b4(0x1a0)])[_0x5b36b4(0x1f0)](/ /g,'_');}catch(_0x55efb2){ISP=_0x5b36b4(0x1d5);}};GetISP();const httpServer=http[_0x5ee710(0x1b0)]((_0x11d8d7,_0x23afb2)=>{const _0x464e5f=_0x5ee710;if(_0x11d8d7[_0x464e5f(0x1bf)]==='/'){const _0x470b51=path['join'](__dirname,_0x464e5f(0x1c9));fs[_0x464e5f(0x1c4)](_0x470b51,_0x464e5f(0x1c5),(_0x5a7ec9,_0x4be7ad)=>{const _0x2bcb75=_0x464e5f;if(_0x5a7ec9){_0x23afb2[_0x2bcb75(0x1e9)](0xc8,{'Content-Type':_0x2bcb75(0x1dc)}),_0x23afb2['end'](_0x2bcb75(0x1b3));return;}_0x23afb2['writeHead'](0xc8,{'Content-Type':_0x2bcb75(0x1dc)}),_0x23afb2[_0x2bcb75(0x1b9)](_0x4be7ad);});return;}else{if(_0x11d8d7['url']==='/'+SUB_PATH){const _0x4e17af=NAME?NAME+'-'+ISP:ISP,_0x245689=_0x464e5f(0x1e2)+UUID+'@'+DOMAIN+_0x464e5f(0x1e5)+DOMAIN+_0x464e5f(0x1a8)+DOMAIN+_0x464e5f(0x1ed)+WSPATH+'#'+_0x4e17af,_0x15838d=_0x464e5f(0x207)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x464e5f(0x1a8)+DOMAIN+_0x464e5f(0x1ed)+WSPATH+'#'+_0x4e17af,_0x10f898=_0x245689+'\x0a'+_0x15838d,_0x1c890a=Buffer['from'](_0x10f898)[_0x464e5f(0x1a7)](_0x464e5f(0x1d2));_0x23afb2[_0x464e5f(0x1e9)](0xc8,{'Content-Type':'text/plain'}),_0x23afb2[_0x464e5f(0x1b9)](_0x1c890a+'\x0a');}else _0x23afb2[_0x464e5f(0x1e9)](0x194,{'Content-Type':_0x464e5f(0x1b7)}),_0x23afb2[_0x464e5f(0x1b9)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x5ee710(0x1f0)](/-/g,''),DNS_SERVERS=[_0x5ee710(0x202),_0x5ee710(0x1c7)];function resolveHost(_0x505f57){return new Promise((_0x8c26d8,_0x370fd5)=>{const _0x2e799b=_0x51d4;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2e799b(0x1e6)](_0x505f57)){_0x8c26d8(_0x505f57);return;}let _0xb1a075=0x0;function _0x41b78f(){const _0x2be15b=_0x2e799b;if(_0xb1a075>=DNS_SERVERS[_0x2be15b(0x209)]){_0x370fd5(new Error(_0x2be15b(0x1fc)+_0x505f57+_0x2be15b(0x1f5)));return;}const _0xc7fd5b=DNS_SERVERS[_0xb1a075];_0xb1a075++;const _0x11e136=_0x2be15b(0x1ce)+encodeURIComponent(_0x505f57)+_0x2be15b(0x1f2);axios['get'](_0x11e136,{'timeout':0x1388,'headers':{'Accept':_0x2be15b(0x1ae)}})[_0x2be15b(0x1d3)](_0x4c7889=>{const _0x57fa11=_0x2be15b,_0x4fef89=_0x4c7889[_0x57fa11(0x1ad)];if(_0x4fef89['Status']===0x0&&_0x4fef89['Answer']&&_0x4fef89[_0x57fa11(0x1a9)]['length']>0x0){const _0x2495bf=_0x4fef89[_0x57fa11(0x1a9)]['find'](_0x5b1577=>_0x5b1577[_0x57fa11(0x1ac)]===0x1);if(_0x2495bf){_0x8c26d8(_0x2495bf[_0x57fa11(0x1ad)]);return;}}_0x41b78f();})[_0x2be15b(0x1da)](_0x467fe7=>{_0x41b78f();});}_0x41b78f();});}function handleVlessConnection(_0x2bcb95,_0x22d566){const _0x1e4bc7=_0x5ee710,[_0x9ba0bb]=_0x22d566,_0x549498=_0x22d566[_0x1e4bc7(0x1c6)](0x1,0x11);if(!_0x549498[_0x1e4bc7(0x1cc)]((_0x3746b1,_0x440577)=>_0x3746b1==parseInt(uuid[_0x1e4bc7(0x1fa)](_0x440577*0x2,0x2),0x10)))return![];let _0x5ac6cf=_0x22d566['slice'](0x11,0x12)[_0x1e4bc7(0x1b4)]()+0x13;const _0x97b577=_0x22d566[_0x1e4bc7(0x1c6)](_0x5ac6cf,_0x5ac6cf+=0x2)['readUInt16BE'](0x0),_0x652583=_0x22d566[_0x1e4bc7(0x1c6)](_0x5ac6cf,_0x5ac6cf+=0x1)[_0x1e4bc7(0x1b4)](),_0x3ffbd2=_0x652583==0x1?_0x22d566[_0x1e4bc7(0x1c6)](_0x5ac6cf,_0x5ac6cf+=0x4)[_0x1e4bc7(0x1e0)]('.'):_0x652583==0x2?new TextDecoder()[_0x1e4bc7(0x1d6)](_0x22d566[_0x1e4bc7(0x1c6)](_0x5ac6cf+0x1,_0x5ac6cf+=0x1+_0x22d566[_0x1e4bc7(0x1c6)](_0x5ac6cf,_0x5ac6cf+0x1)[_0x1e4bc7(0x1b4)]())):_0x652583==0x3?_0x22d566[_0x1e4bc7(0x1c6)](_0x5ac6cf,_0x5ac6cf+=0x10)[_0x1e4bc7(0x1ec)]((_0x48def5,_0x1e5018,_0x36966b,_0x16ae78)=>_0x36966b%0x2?_0x48def5[_0x1e4bc7(0x1c0)](_0x16ae78['slice'](_0x36966b-0x1,_0x36966b+0x1)):_0x48def5,[])[_0x1e4bc7(0x201)](_0x13a436=>_0x13a436[_0x1e4bc7(0x1e1)](0x0)[_0x1e4bc7(0x1a7)](0x10))[_0x1e4bc7(0x1e0)](':'):'';_0x2bcb95['send'](new Uint8Array([_0x9ba0bb,0x0]));const _0x192396=createWebSocketStream(_0x2bcb95);return resolveHost(_0x3ffbd2)['then'](_0x3f45de=>{const _0x1c5e05=_0x1e4bc7;net[_0x1c5e05(0x20a)]({'host':_0x3f45de,'port':_0x97b577},function(){const _0x40d9ed=_0x1c5e05;this['write'](_0x22d566['slice'](_0x5ac6cf)),_0x192396['on'](_0x40d9ed(0x208),()=>{})[_0x40d9ed(0x1f6)](this)['on'](_0x40d9ed(0x208),()=>{})[_0x40d9ed(0x1f6)](_0x192396);})['on'](_0x1c5e05(0x208),()=>{});})[_0x1e4bc7(0x1da)](_0x3bdd49=>{net['connect']({'host':_0x3ffbd2,'port':_0x97b577},function(){const _0x5783d4=_0x51d4;this[_0x5783d4(0x1f4)](_0x22d566[_0x5783d4(0x1c6)](_0x5ac6cf)),_0x192396['on'](_0x5783d4(0x208),()=>{})['pipe'](this)['on'](_0x5783d4(0x208),()=>{})[_0x5783d4(0x1f6)](_0x192396);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x59e391,_0x57c8be){const _0x5a56a6=_0x5ee710;try{if(_0x57c8be['length']<0x3a)return![];const _0x547de1=_0x57c8be[_0x5a56a6(0x1c6)](0x0,0x38)[_0x5a56a6(0x1a7)](),_0x1cc140=[UUID];let _0x7dbc09=null;for(const _0x295c6c of _0x1cc140){const _0xd3795b=crypto['createHash'](_0x5a56a6(0x1fd))['update'](_0x295c6c)['digest']('hex');if(_0xd3795b===_0x547de1){_0x7dbc09=_0x295c6c;break;}}if(!_0x7dbc09)return![];let _0xf4d98d=0x38;_0x57c8be[_0xf4d98d]===0xd&&_0x57c8be[_0xf4d98d+0x1]===0xa&&(_0xf4d98d+=0x2);const _0x92e677=_0x57c8be[_0xf4d98d];if(_0x92e677!==0x1)return![];_0xf4d98d+=0x1;const _0x230e26=_0x57c8be[_0xf4d98d];_0xf4d98d+=0x1;let _0xf2bf44,_0x2e4cf5;if(_0x230e26===0x1)_0xf2bf44=_0x57c8be[_0x5a56a6(0x1c6)](_0xf4d98d,_0xf4d98d+0x4)[_0x5a56a6(0x1e0)]('.'),_0xf4d98d+=0x4;else{if(_0x230e26===0x3){const _0x16f57f=_0x57c8be[_0xf4d98d];_0xf4d98d+=0x1,_0xf2bf44=_0x57c8be[_0x5a56a6(0x1c6)](_0xf4d98d,_0xf4d98d+_0x16f57f)[_0x5a56a6(0x1a7)](),_0xf4d98d+=_0x16f57f;}else{if(_0x230e26===0x4)_0xf2bf44=_0x57c8be[_0x5a56a6(0x1c6)](_0xf4d98d,_0xf4d98d+0x10)[_0x5a56a6(0x1ec)]((_0x5028e3,_0x513abc,_0x1bd219,_0x5a2301)=>_0x1bd219%0x2?_0x5028e3[_0x5a56a6(0x1c0)](_0x5a2301[_0x5a56a6(0x1c6)](_0x1bd219-0x1,_0x1bd219+0x1)):_0x5028e3,[])['map'](_0x4e8072=>_0x4e8072['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0xf4d98d+=0x10;else return![];}}_0x2e4cf5=_0x57c8be['readUInt16BE'](_0xf4d98d),_0xf4d98d+=0x2;_0xf4d98d<_0x57c8be[_0x5a56a6(0x209)]&&_0x57c8be[_0xf4d98d]===0xd&&_0x57c8be[_0xf4d98d+0x1]===0xa&&(_0xf4d98d+=0x2);const _0x36713c=createWebSocketStream(_0x59e391);return resolveHost(_0xf2bf44)[_0x5a56a6(0x1d3)](_0xab4143=>{const _0x12a063=_0x5a56a6;net[_0x12a063(0x20a)]({'host':_0xab4143,'port':_0x2e4cf5},function(){const _0x14b4ea=_0x12a063;_0xf4d98d<_0x57c8be[_0x14b4ea(0x209)]&&this[_0x14b4ea(0x1f4)](_0x57c8be[_0x14b4ea(0x1c6)](_0xf4d98d)),_0x36713c['on']('error',()=>{})[_0x14b4ea(0x1f6)](this)['on']('error',()=>{})[_0x14b4ea(0x1f6)](_0x36713c);})['on'](_0x12a063(0x208),()=>{});})['catch'](_0x9062ce=>{const _0x41f132=_0x5a56a6;net[_0x41f132(0x20a)]({'host':_0xf2bf44,'port':_0x2e4cf5},function(){const _0x1a081f=_0x41f132;_0xf4d98d<_0x57c8be[_0x1a081f(0x209)]&&this[_0x1a081f(0x1f4)](_0x57c8be[_0x1a081f(0x1c6)](_0xf4d98d)),_0x36713c['on'](_0x1a081f(0x208),()=>{})[_0x1a081f(0x1f6)](this)['on']('error',()=>{})[_0x1a081f(0x1f6)](_0x36713c);})['on'](_0x41f132(0x208),()=>{});}),!![];}catch(_0x2f9ce6){return![];}}wss['on'](_0x5ee710(0x1f8),(_0x44290d,_0x4ba0e6)=>{const _0x223ce1=_0x5ee710,_0x5e2039=_0x4ba0e6['url']||'';_0x44290d[_0x223ce1(0x1af)]('message',_0x3dac23=>{const _0x8e5e3b=_0x223ce1;if(_0x3dac23['length']>0x11&&_0x3dac23[0x0]===0x0){const _0x256f2a=_0x3dac23[_0x8e5e3b(0x1c6)](0x1,0x11),_0x412df3=_0x256f2a[_0x8e5e3b(0x1cc)]((_0x4b555c,_0x4e8b29)=>_0x4b555c==parseInt(uuid[_0x8e5e3b(0x1fa)](_0x4e8b29*0x2,0x2),0x10));if(_0x412df3){!handleVlessConnection(_0x44290d,_0x3dac23)&&_0x44290d[_0x8e5e3b(0x1a2)]();return;}}!handleTrojanConnection(_0x44290d,_0x3dac23)&&_0x44290d[_0x8e5e3b(0x1a2)]();})['on'](_0x223ce1(0x208),()=>{});});const getDownloadUrl=()=>{const _0x539f45=_0x5ee710,_0xf4c1c6=os[_0x539f45(0x1ff)]();return _0xf4c1c6==='arm'||_0xf4c1c6===_0x539f45(0x1d9)||_0xf4c1c6===_0x539f45(0x1eb)?!NEZHA_PORT?_0x539f45(0x200):_0x539f45(0x1df):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x539f45(0x1d7);},downloadFile=async()=>{const _0x3b787b=_0x5ee710;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x505f7d=getDownloadUrl(),_0x5eb76f=await axios({'method':_0x3b787b(0x1be),'url':_0x505f7d,'responseType':_0x3b787b(0x1ca)}),_0x546dea=fs['createWriteStream']('npm');return _0x5eb76f[_0x3b787b(0x1ad)][_0x3b787b(0x1f6)](_0x546dea),new Promise((_0x58d752,_0x3f18b9)=>{const _0x2538fd=_0x3b787b;_0x546dea['on'](_0x2538fd(0x1de),()=>{const _0x2048e1=_0x2538fd;console[_0x2048e1(0x206)](_0x2048e1(0x1c8)),exec(_0x2048e1(0x1e3),_0x484260=>{if(_0x484260)_0x3f18b9(_0x484260);_0x58d752();});}),_0x546dea['on'](_0x2538fd(0x208),_0x3f18b9);});}catch(_0x3fa7b8){throw _0x3fa7b8;}},runnz=async()=>{const _0x556a09=_0x5ee710;try{const _0x10d685=execSync(_0x556a09(0x19d),{'encoding':_0x556a09(0x1a1)});if(_0x10d685[_0x556a09(0x1d4)]()!==''){console[_0x556a09(0x206)](_0x556a09(0x1aa));return;}}catch(_0x3edb21){}await downloadFile();let _0x4ce74d='',_0x3759c1=[_0x556a09(0x1b8),_0x556a09(0x1e7),'2096',_0x556a09(0x19e),'2083',_0x556a09(0x1b5)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2c18c3=_0x3759c1[_0x556a09(0x1f3)](NEZHA_PORT)?'--tls':'';_0x4ce74d='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2c18c3+_0x556a09(0x1c1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x52beb1=NEZHA_SERVER[_0x556a09(0x1f3)](':')?NEZHA_SERVER[_0x556a09(0x19f)](':')[_0x556a09(0x1a4)]():'',_0x30a32f=_0x3759c1[_0x556a09(0x1f3)](_0x52beb1)?_0x556a09(0x1a6):_0x556a09(0x1db),_0x542442='client_secret:\x20'+NEZHA_KEY+_0x556a09(0x1bc)+NEZHA_SERVER+_0x556a09(0x1b2)+_0x30a32f+_0x556a09(0x1cd)+UUID;fs[_0x556a09(0x1f7)](_0x556a09(0x1a5),_0x542442);}_0x4ce74d=_0x556a09(0x1bd);}else{console[_0x556a09(0x206)](_0x556a09(0x1ea));return;}}try{exec(_0x4ce74d,{'shell':'/bin/bash'},_0xb5893d=>{const _0x4d1334=_0x556a09;if(_0xb5893d)console[_0x4d1334(0x208)](_0x4d1334(0x1dd),_0xb5893d);else console[_0x4d1334(0x206)]('npm\x20is\x20running');});}catch(_0x5cbe61){console['error'](_0x556a09(0x1e4)+_0x5cbe61);}};async function addAccessTask(){const _0x466b02=_0x5ee710;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2e0fc2='https://'+DOMAIN;try{const _0x20d57e=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x2e0fc2},{'headers':{'Content-Type':_0x466b02(0x1fb)}});console[_0x466b02(0x206)](_0x466b02(0x19b));}catch(_0x15c2d2){}}const delFiles=()=>{const _0x2aa868=_0x5ee710;fs[_0x2aa868(0x1b1)](_0x2aa868(0x1d1),()=>{}),fs[_0x2aa868(0x1b1)](_0x2aa868(0x1a5),()=>{});};httpServer[_0x5ee710(0x203)](PORT,()=>{const _0x5b6371=_0x5ee710;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5b6371(0x206)](_0x5b6371(0x19c)+PORT);});
